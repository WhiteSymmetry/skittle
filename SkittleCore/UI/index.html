<html>
<head>
	<title>{{ genome }} WebSkittle Mockup</title>

	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/browser.css">
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}css/popover.css">
	<style type="text/css">

	</style>
<!--[if lt IE 9]>
    <script src="{{STATIC_URL}}js/excanvas.js"></script>
<![endif]-->
	<script src="/browse/state.json"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="{{STATIC_URL}}js/utility.js"></script>
	<script src="{{STATIC_URL}}js/interface.js"></script>
	<script src="{{STATIC_URL}}js/draw_canvas.js"></script>
	<script type="text/javascript">


	</script>
</head>
<body>
	<h1 id="logo"><img src="{{STATIC_URL}}gfx/skittle-logo3.png"><span>DNA</span>Skittle</h1>
	
	<div id="canvasContainer">
	    <canvas id="c" width="2000" height="1000"></canvas>
		<div id="graph-labels">
			<ul>
				<li id="graphLabel-a" style="width:159px;">Annotations <img src="{{STATIC_URL}}gfx/icons/close.png" class="closeGraphButton"></li>
				<li id="graphLabel-c" style="width:76px;">Alignment Cylinder <img src="{{STATIC_URL}}gfx/icons/close.png" class="closeGraphButton"></li>
				<li id="graphLabel-n" style="width:320px;display:block;" class="widthBased">Nucleotide Display <img src="{{STATIC_URL}}gfx/icons/close.png" class="closeGraphButton"></li>
				<li id="graphLabel-b" style="width:410px;">Nucleotide Bias <img src="{{STATIC_URL}}gfx/icons/close.png" class="closeGraphButton"></li>
				<li id="graphLabel-m" style="width:640px;">Repeat Map <img src="{{STATIC_URL}}gfx/icons/close.png" class="closeGraphButton"></li>
			</ul>
		</div>
	</div>
	<header>
		<ul>
			<li>Discover</li>
			<li>Share</li>
			<li>Learn</li>
		</ul>
		<p><a href="https://twitter.com/genome_skittle"><img src="{{STATIC_URL}}gfx/twitter-bird-dark-bgs.png" height="36" width="36"></a>
			<a href="https://github.com/josiahseaman/skittle"><img src="{{STATIC_URL}}gfx/github-white.png" height="22"></a></p>
	</header>
	<div id="tools">
		<ul>
			<li class="" id="buttonGraphs"><img src="{{STATIC_URL}}gfx/icons/67.png" width="20" height="20">Graphs</li>
			<li class="radio-tools active" data-tool="Move"><img src="{{STATIC_URL}}gfx/icons/41.png" width="20" height="20">Move</li>
			<li class="radio-tools" data-tool="Select"><img src="{{STATIC_URL}}gfx/icons/dialog.png" width="20" height="20">Select</li>
			<li class="radio-tools" data-tool="Find"><img src="{{STATIC_URL}}gfx/icons/7.png" width="20" height="20">Find</li>
			<li class="radio-tools" data-tool="Annotate"><img src="{{STATIC_URL}}gfx/icons/39.png" width="20" height="20">Annotate</li>
			<li id="link-here"><img src="{{STATIC_URL}}gfx/icons/flag.png" width="20" height="20">Link Here</li>
			<li><img src="{{STATIC_URL}}gfx/icons/camera.png" width="20" height="20">Screenshot</li>
			<li class="bottom"><img src="{{STATIC_URL}}gfx/icons/cog.png" width="20" height="20">Settings</li>
		</ul>
	</div>
	<div id="dials">
		<ul>
			<li>Width: <span id="widthDisplay" data-fn="UIwidthChange">{{ width }} bp</span>
				<div id="widthBubble" class="popover arrow-bottom-center">
					<div class="button" onClick="doubleWidth()">x2</div>
					<div class="button" onClick="halfWidth()">/2</div>
				</div>
			</li>
			<li>Scale: <span id="scaleDisplay">{{ scale }} bp/pixel</span>
				<div id="scaleBubble" class="popover arrow-bottom-center">
					<div class="button" onClick="setStartTo(1)">1:1</div>
					<div class="button" onClick="goToEnd()">Whole File</div>
				</div>
			</li>
			<li>Start Index: <span id="startDisplay" data-fn="UIstartChange">{{ start }}</span>
				<div id="startBubble" class="popover arrow-bottom-center">
					<div class="button" onClick="setStartTo(1)">Top</div>
					<div class="button" onClick="goToEnd()">End</div>
				</div>
			</li>
			<li>End Index: <span id="endDisplay" data-fn="UIendChange">23865</span></li>
		</ul>
	</div>


	<div class="popover arrow-left-top" id="graphList">
		<ul>
			<li><input type="checkbox" id="showGraph-a" name="showGraphA"><label for="showGraphA">Annotations</label></li>
			<li><input type="checkbox" id="showGraph-n" name="showGraphND" checked="checked"><label for="showGraphND">Nucleotide Display</label></li>
			<li><input type="checkbox" id="showGraph-b" name="showGraphNB"><label for="showGraphA">Nucleotide Bias</label></li>
			<li><input type="checkbox" id="showGraph-m" name="showGraphRM"><label for="showGraphRM">Repeat Map</label></li>
		</ul>
	</div>


	<script type="text/javascript">
    var cc, c, b;
    var isDrag = false;
    var dragWidth = false;
    var activeTool = 'Move';

    var isInvalidDisplay = true
    
    // initial values
    start = {{ start }};
    width = {{ width }};
    scale = {{ scale }};
    zoom  = {{ zoom }};
    fileLength = {{ fileLength }};
    skixelsOnScreen = toSkixels($('#canvasContainer').height())*width;

    // if graphs are specified in the url set their visibility
    var initialGraphs = "{{ graphs }}".split('')
    for (var key in graphStatus) {
    	if ($.inArray(key,initialGraphs)>=0) showGraph(key)
    	else hideGraph(key)
    }

    imageUnrendered = new Image()
    imageUnrendered.src = "{{STATIC_URL}}gfx/checkers.png"

	$(document).ready(function() {

		cc = document.getElementById('c') //visible canvas - scale will be 3*zoom
		c = cc.getContext("2d");
	    var bb = document.createElement('canvas'); //scratch canvas
	    bb.height = 1000
	    bb.width = 5000
	    b = bb.getContext("2d");


	    init();

	    document.onkeydown = keyListener; 
	    
	    cc.onselectstart = function () { return false; } //fixes a problem where double clicking causes text to get selected on the canvas
	    cc.onmousedown = mouseDown;
	    cc.onmousemove = mouseMove;
	    cc.onmouseup = mouseUp;
	    cc.onmousewheel = mouseWheel;

	})
	</script>

</body>
</html>